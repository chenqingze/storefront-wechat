<!--pages/catalog/details/index.wxml-->
<view class="go-back-btn">
  <t-icon name="chevron-left" size="24" color="#fff;" bind:click="goBack" />
</view>
<view class="product-details-container">
  <view class="product-head">
    <!-- 产品图片 -->
    <t-swiper
      wx:if="{{pictures.length > 0}}"
      height="750rpx"
      current="{{current}}"
      autoplay="{{true}}"
      duration="{{500}}"
      interval="{{5000}}"
      navigation="{{navigation}}"
      list="{{pictures}}"
    />
    <!-- 产品信息 -->
    <view class="product-info">
      <view class="product-title">
        <view class="product-name">{{name}}</view>
        <view class="product-share">
          <t-button open-type="share" size="extra-small" shape="round" icon="share-1" theme="light">分享</t-button>
        </view>
      </view>
      <view class="product-price">
        <text class="sale-price">¥{{salePrice?salePrice:retailPrice}}</text>
        <text class="retail-price" wx:if="{{retailPrice}}">¥{{retailPrice}}</text>
      </view>
    </view>
    <!-- 产品选项 -->
    <view class="variants-select" bindtap="onShowVariantsSelectPopup">
      <view class="label">已选</view>
      <view class="content">
        <view>
          <block wx:if="{{productType==='STANDARD'}}">{{quantity}}件 </block>
          <block wx:else> {{selectedOptionValueNames}},{{quantity}}件 </block>
        </view>
        <t-icon name="chevron-right" size="40rpx" color="#BBBBBB" />
      </view>
    </view>
  </view>
  <!-- 产品评论（暂未实现）-->

  <!-- 产品描述 -->
  <view class="description">
    <t-divider content="图文详情" />
    <rich-text nodes="{{product.description}}" space="emsp" />
  </view>
  <!-- 底部操作按钮 -->
  <view class="product-bottom-operation">
    <view class="bottom-btn-group">
      <view class="icon-btn">
        <t-icon name="home" size="18" />
        <view class="icon-btn-text">首页</view>
      </view>
      <view class="icon-btn">
        <t-icon name="star" size="18" />
        <view class="icon-btn-text">收藏</view>
      </view>
      <view class="icon-btn">
        <t-badge count="{{allQuantity}}" offset="{{ [2, -2] }}" class="wrapper">
          <t-icon name="cart" size="18" />
          <view class="icon-btn-text">购物车</view>
        </t-badge>
      </view>
    </view>
    <view class="add-cart-button" bind:tap="onAddItemToCart"> 加入购物车 </view>
  </view>
</view>
<t-back-top wx:if="{{showBackTop}}" theme="half-round"></t-back-top>
<variants-select-popup
  show="{{isVariantsSelectPopupShow}}"
  product="{{product}}"
  buyQuantity="{{quantity}}"
  bind:buyQuantityChangeEvent="onBuyQuantityChange"
  bind:hideVariantsSelectPopupEvent="onHideVariantsSelectPopup"
  bind:selectedOptionValueForVariantEvent="onSelectedOptionValueForVariant"
  bind:addItemToCartEvent="onAddItemToCart"
/>
